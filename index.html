<!DOCTYPE html>
<html lang="en" xmlns="">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ÁÇπÂçïÁ≥ªÁªü</title>
    <link rel="icon" href="./img/favicon.ico" type="image/x-icon">
    <link rel="stylesheet" href="./css/index.css">
    <link rel="stylesheet" href="./css/common.css">
    <script src="https://cdn.tailwindcss.com"></script>
</head>

<body>
    <div id="app">
        <el-container>
            <!-- È°∂ÈÉ®ËèúÂçïÊ†è -->
            <el-header>
                <h2 style="text-align: center;" class="text-3xl font-bold underline m-3" @click="loginManage">Èõ∂ËêΩÈó≤Â∫≠ÁÇπÂçïÁ≥ªÁªü
                </h2>
                <div style="display: flex;justify-content: space-around">
                    <span>
                        {{weatherInfo.province || ''}}{{weatherInfo.city || ''}}
                    </span>
                    <span>
                        Â§©Ê∞îÔºö{{weatherInfo.weather || 'Êó†'}} {{weatherInfo.temperature || 'Êó†'}}‚ÑÉ
                    </span>
                    <span>
                        ÊπøÂ∫¶Ôºö{{weatherInfo.humidity || 'Êó†'}}%RH
                    </span>
                </div>
            </el-header>
            <el-main>
                <el-row>
                    <el-carousel style="width: 90vw; height: 30vh; border-radius: 8px;margin-top: 34px;"
                        trigger="click">
                        <el-carousel-item v-for="item in bannerInfo">
                            <!--                            <img style="width: 90vw; height: 30vh" src="./img/douhuayu.jpg" alt="douhuayu">-->
                            <div class="banner-box" :style="bannerStyle(item)">

                            </div>
                        </el-carousel-item>
                        <!--                        <el-carousel-item>-->
                        <!--                            <img style="width: 90vw; height: 30vh" src="./img/laziji.jpg" alt="laziji">-->
                        <!--                        </el-carousel-item>-->
                        <!--                        <el-carousel-item>-->
                        <!--                            <img style="width: 90vw; height: 30vh" src="./img/koushuiji.jpg" alt="koushuiji">-->
                        <!--                        </el-carousel-item>-->
                        <!--                        <el-carousel-item>-->
                        <!--                            <img style="width: 90vw; height: 30vh" src="./img/mapodoufu.jpg" alt="mapodoufu">-->
                        <!--                        </el-carousel-item>-->
                    </el-carousel>
                </el-row>
                <div class="line">

                </div>
                <el-row>
                    <!-- ËèúÂìÅÂ±ïÁ§∫Âå∫ -->
                    <el-col :span="24" id="menu">
                        <h3 class="text-2xl font-bold">ËèúÂçï</h3>
                        <el-table style="border-radius: 8px;" :data="dishes" empty-text="Ê≤°ÊúâËèúÂìÅÂìü~">
                            <el-table-column prop="name" label="ËèúÂêç"></el-table-column>
                            <el-table-column prop="price" label="‰ª∑Ê†º">
                                <template #default="scope">
                                    <div style="display: flex; align-items: center">
                                        ¬•
                                        <span>{{ scope.row.price }}</span>
                                        ÂÖÉ
                                    </div>
                                </template>
                            </el-table-column>
                            <el-table-column prop="status" label="Áä∂ÊÄÅ">
                                <template #default="scope">
                                    <el-button size="small" v-if="scope.row.status===false" type="danger"
                                        round>ÂçñÂÆå</el-button>
                                    <el-button size="small" v-else type="success" round>ÁÉ≠Âçñ</el-button>
                                </template>
                            </el-table-column>
                            <el-table-column label="Êìç‰Ωú">
                                <template #default="scope">
                                    <div style="display: flex;flex-direction: column;">
                                        <el-button :disabled="!scope.row.status"
                                            style="margin-left: 12px; margin-bottom: 4px" type="primary" size="small"
                                            @click="addToOrder(scope.row)">ÈÄâÊã©</el-button>
                                        <el-button style="margin-left: 12px; margin-bottom: 4px" v-if="isLogin"
                                            type="primary" size="small" @click="updateDialog(scope.row)">‰øÆÊîπ</el-button>

                                        <el-popconfirm title="Á°ÆËÆ§Êìç‰ΩúÁ†ÅÔºü" confirm-button-text="Á°ÆËÆ§" cancel-button-text="ÂèñÊ∂à"
                                            @confirm="delOrder(scope.row.id)">
                                            <template #reference>
                                                <el-button v-if="isLogin" type="warning" size="small">Âà†Èô§</el-button>
                                            </template>
                                        </el-popconfirm>

                                    </div>
                                </template>
                            </el-table-column>
                        </el-table>
                    </el-col>
                </el-row>
                <div class="line">

                </div>
                <!-- ÁÇπÂçïÂå∫ -->
                <el-row style="margin-top: 20px;margin-bottom: 40px;">
                    <el-col :span="24" id="order">
                        <h3 class="text-2xl font-bold">Â∑≤ÁÇπËèúÂìÅ</h3>
                        <el-table style="border-radius: 8px;" :data="order" empty-text="Ê≤°ÊúâÁÇπËèúÂìü~">
                            <el-table-column prop="name" label="ËèúÂêç"></el-table-column>
                            <el-table-column prop="price" label="‰ª∑Ê†º"></el-table-column>
                            <el-table-column label="Êìç‰Ωú">
                                <template #default="scope">
                                    <el-button type="danger" size="small"
                                        @click="removeFromOrder(scope.row)">ÁßªÈô§</el-button>
                                </template>
                            </el-table-column>
                        </el-table>
                        <p>ÊÄª‰ª∑Ôºö{{ totalPrice }} ÂÖÉ</p>
                        <div style="text-align: right;">
                            <el-button type="danger" @click="order = []">Ê∏ÖÁ©∫</el-button>
                            <el-popconfirm title="Á°ÆËÆ§Êìç‰ΩúÁ†ÅÔºü" confirm-button-text="Á°ÆËÆ§" cancel-button-text="ÂèñÊ∂à"
                                @confirm="sureOrder">
                                <template #reference>
                                    <el-button type="success">Á°ÆËÆ§‰∏ãÂçï</el-button>
                                </template>
                            </el-popconfirm>
                        </div>
                    </el-col>
                </el-row>
                <div class="line">
                </div>
                <!-- ÂÆöÂçïÂå∫ -->
                <el-row style="margin-top: 20px;margin-bottom: 40px;">
                    <el-col :span="24" id="goods">
                        <h3 class="text-2xl font-bold">ËÆ¢Âçï</h3>

                        <div style="display: flex; justify-content: right; align-items: center; margin-bottom: 12px;">
                            <el-input v-model="input4" style="width:40%;margin-right: 8px;" placeholder="Â∫èÂè∑" @change="queryData">
                                <template #prefix>
                                    <div>
                                        Êü•ËØ¢
                                    </div>
                                </template>
                            </el-input>
                            <el-select v-model="valueStatus" size="small" placeholder="ÈÄâÊã©Êü•Áúã"
                                style="width: 100px; margin-right: 8px;" @change="getGoods('goods', 'goods')">
                                <el-option v-for="item in options" :key="item.value" :label="item.label"
                                    :value="item.value" />
                            </el-select>
                            <!-- v-if="isLogin" -->
                            <el-button type="primary" size="small"
                                @click="exportToExcel(goods, 'ËÆ¢ÂçïË°®')">ÂØºÂá∫Excel</el-button>
                        </div>
                        <div v-if="goods.length === 0" style="text-align: center;color: #cccccc">
                            Ê≤°ÊúâËÆ¢ÂçïÂìü~
                        </div>
                        <el-card v-for="o in goods" :key="o" style="margin-bottom: 8px;">
                            <template #header>
                                <div class="card-header">
                                    <span>{{o.name}}</span>
                                </div>
                            </template>
                            <p class="text item">Â∫èÂè∑: {{ o.id }}</p>
                            <p class="text item">ÊÄª‰ª∑: ¬•{{ o.totalPrice }}ÂÖÉ</p>
                            <p class="text item">ËÆ¢È§êÊó∂Èó¥: {{ o.created }}</p>
                            <p class="text item">Áä∂ÊÄÅ:
                                <el-button size="small" v-if="o.status===0" type="danger" round>ÁÉπÈ•™‰∏≠</el-button>
                                <el-button size="small" v-else type="success" round>ÂÆåÊàê</el-button>
                            </p>
                            <template #footer>
                                <div style="text-align:right;display: flex;justify-content: space-around;align-items: center">


                                    <el-popconfirm title="Á°ÆËÆ§Êìç‰ΩúÂêóÔºü" confirm-button-text="Á°ÆËÆ§" cancel-button-text="ÂèñÊ∂à"
                                        @confirm="printText(o)">
                                        <template #reference>
                                            <div>
                                                <el-badge :value="o.printNum" class="item" color="green">
                                                    <el-button v-if="o.status===0" type="primary" size="small">ÊâìÂç∞</el-button>
                                                </el-badge>
                                            </div>
                                        </template>
                                    </el-popconfirm>
                                    <el-popconfirm title="Á°ÆËÆ§Êìç‰ΩúÂêóÔºü" confirm-button-text="Á°ÆËÆ§" cancel-button-text="ÂèñÊ∂à"
                                                   @confirm="copyText(o)">
                                        <template #reference>

                                            <div>
                                                <el-badge :value="o.copyNum" class="item" color="green">
                                                    <el-button v-if="o.status===0" type="primary" size="small">Â§çÂà∂</el-button>
                                                </el-badge>
                                            </div>
                                        </template>
                                    </el-popconfirm>

                                    <el-popconfirm v-if="o.status===0"  title="Á°ÆËÆ§Êìç‰ΩúÂêóÔºü" confirm-button-text="Á°ÆËÆ§" cancel-button-text="ÂèñÊ∂à"
                                                   @confirm="overOrder(o)">
                                        <template #reference>
                                            <div>
                                                <el-badge value="üëå" class="item" color="green">
                                                    <el-button type="success" size="small">ÂÆåÊàê</el-button>
                                                </el-badge>
                                            </div>

                                        </template>
                                    </el-popconfirm>
                                </div>
                            </template>
                        </el-card>

                    </el-col>
                </el-row>
                <!--                <div class="demo-image__error">-->
                <!--                    <div class="block">-->
                <!--                        <span class="demonstration">ÈªòËÆ§</span>-->
                <!--                        <el-image :src="srcImg"/>-->
                <!--                    </div>-->
                <!--                    <div class="block">-->
                <!--                        <span class="demonstration">Â§±Ë¥•</span>-->
                <!--                        <el-image>-->
                <!--                            <template #error>-->
                <!--                                <div class="image-slot">-->
                <!--                                    <el-image src="./img/douhuayu.jpg" alt="Ê≤°ÊúâÂõæÁâá"/>-->
                <!--                                </div>-->
                <!--                            </template>-->
                <!--                        </el-image>-->
                <!--                    </div>-->
                <!--                </div>-->
                <!--                <el-upload-->
                <!--                        v-model="fileList"-->
                <!--                        class="upload-demo"-->
                <!--                        action= "#"-->
                <!--                        :on-preview="handlePreview"-->
                <!--                        :on-remove="handleRemove"-->
                <!--                        :before-upload="uploadFn"-->
                <!--                        list-type="picture"-->
                <!--                >-->
                <!--                    <el-button type="primary">ÁÇπÂáª‰∏ä‰º†</el-button>-->
                <!--                    <template #tip>-->
                <!--                        <div class="el-upload__tip">-->
                <!--                            ÂõæÁâá‰∏çËÉΩË∂ÖËøá 500kb-->
                <!--                        </div>-->
                <!--                    </template>-->
                <!--                </el-upload>-->
                <div style="margin-bottom: 60px;">
                </div>
                <el-dialog v-model="dialogVisible">
                    <img w-full :src="dialogImageUrl" alt="Preview Image" />
                </el-dialog>
                <el-row
                    style="position: fixed; bottom: 0; left: 0; width:100vw; text-align: center; background-color: #f5f5f5; padding: 10px;z-index: 999; display: flex; justify-content: center;">
                    <el-button-group>
                        <el-button type="primary" @click="scrollTo('menu')">ËèúÂçïÈÄâËèú</el-button>
                        <el-button type="primary" @click="scrollTo('goods')">
                            Â∑≤ÁÇπËÆ¢Âçï
                        </el-button>
                        <el-badge :value="order.length" class="item" color="green">
                            <el-button type="primary" @click="scrollTo('order')">
                                Â∑≤ÈÄâËèúÂìÅ
                            </el-button>
                        </el-badge>
                        <el-button v-if="isLogin" type="primary" @click="dialogFormVisible = true">
                            Ê∑ªÂä†ËèúÂìÅ
                        </el-button>
                    </el-button-group>
                </el-row>

                <div style="position: fixed; top: 0; right: 0; text-align: center; padding: 10px;z-index: 999;">
                    <el-button v-if="isLogin" type="primary" @click="isLogin = false">
                        ÈÄÄÂá∫
                    </el-button>
                </div>
            </el-main>
            <el-dialog v-model="dialogFormVisible" title="Ê∑ªÂä†ËèúÂìÅ" width="80%">
                <el-form :model="newDish">
                    <el-form-item label="ËèúÂêç">
                        <el-input v-model="newDish.name"></el-input>
                    </el-form-item>
                    <el-form-item label="‰ª∑Ê†º">
                        <el-input v-model="newDish.price" type="number"></el-input>
                    </el-form-item>
                    <el-form-item label="‰∏äÊû∂">
                        <el-switch v-model="newDish.status" inline-prompt active-text="ÊòØ" inactive-text="Âê¶" />
                    </el-form-item>
                </el-form>
                <template #footer>
                    <div class="dialog-footer">
                        <el-button @click="dialogFormVisible = false">ÂèñÊ∂à</el-button>
                        <el-button type="primary" @click="uploadDish">
                            Á°ÆËÆ§
                        </el-button>
                    </div>
                </template>
            </el-dialog>
        </el-container>
    </div>

    <!-- Vue Âíå Element UI CDN -->
    <script src="./js/vue.global.js"></script>
    <script src="./js/index.full.js"></script>
    <script src="./js/index.iife.min.js"></script>
    <script src="./js/dexie.js"></script>
    <script src="./js/xlsx.full.min.js"></script>
    <script src="./js/axios.min.js"></script>

    <script src="./js/common.js"></script>

    <script src="./js/index.js"></script>
</body>

</html>
